# 第7回課題について

## 課題５で作成したサンプルアプリケーション環境の脆弱性と、必要な対策について

1. Webサーバとの通信がHTTP通信で、セキュアでない

リスク:通信を盗聴される恐れがある

対策a:AWS Certificate Manager(ACM)でSSL証明書の発行を受け、HTTPS(SSL)通信通信ができるようにする

対策b:ALBのリスナー設定で、HTTP通信リクエストをHTTPS通信へリダイレクトされるよう設定する。


2. Ddos攻撃に対する対応

リスク:通信の過負荷によるサーバーダウン、サービス停止

対策a:デフォルトで設定されているAWS Shieldの確認。

対策b:AWS WAFで、同一のIPアドレスからの接続回数制限や、海外からのアクセス制限など、接続を限定する。


3. その他

サンプルアプリケーション構築時、「ruby,Bundler,Rails,Node,yarn」等、最新ではないバージョンを指定してインストールしたものがある。これらに脆弱性が発見されないか定期的にそれぞれの公式HPや「OWASP」、「OWASP ZAPの脆弱性診断」等を活用して情報収集する。必要があればバージョンアップデートや、セキュリティの見直しを図る。



## 感想と、講義で学んだこと
1. 感想

セキュリティ診断と対策の重要性について学んだ。アプリやサービスの環境構築時に十分なセキュリティ対策を行うことは当然であるが、その後の運用時においても、脆弱性について継続的に診断を行い、必要な対応を図ることが重要だ。OWASPに加え、AWSには脆弱性診断や対策サービスがあるので、これらを活用して脆弱性を早期に発見し、最適な解決策が実行できるようにならなければいけない。


2. 講義で学んだこと
* セキュティの基礎

想定されるリスクを洗い出す。その上で、リスクに対する対応方針を定義する

→　「受容」そのまま受け入れ対策は行わない

→　「低減」影響を減らす

→　「移転（転嫁）」リスク管理を他に任せる

→　「回避」リスク自体を発生させないようにする


* Amazon CodeGuru

AWSのAIサービスの機能の１つで、AIを用いてGitHubなどのリポジトリにあるコードをスキャンし、改善を提案してくれる。
サポートプログラミング言語（java,Pythoon,JavaScript,TypeScript,C#,CloudFormation,Terraform,Go,Ruby）


* AWS WAF

AWSが提供するWAFサービス（ファイアウォール）。
同サービスのルールで「AWSManagedRulesCommonRuleSet」があり、OWASP Top10がサポートされている。


* AWS Certificate Manager(ACM)

SSL証明書を発行するマネージドサービスで、ELBやCloudFrontにアタッチして通信の覗き見を防ぐことが可能。
パブリック証明書は無料、プライベート証明書は有料。


* Amazon Inspector

EC2インスタンス、ECRコンテナイメージに対し自動的に脆弱性スキャン可能。


* AWS Security Hub

AWSの設定情報を検索して、脆弱な部分を指摘。
特定の業界の基準に準拠しているか確認。
内部でCondigルールを作って処理しているので、Config利用料がかかる。


* Secret Manager

秘匿しなければいけない情報をKMSで暗号化して安全に保管、呼び出しするサービス。


* AWS Shield

DDos攻撃からインフラを保護してくれるマネージドサービス。
同Advancedは高額なので注意。


* IAM Access Analyzer

使用されていない（不要な）権限を教えてくれる。


* Amazon GuardDuty

AWS内のイベントをチェックし、セキュリティインシデントの疑いがあるイベントについて指摘してくれる。


* Macie

S3バケットに個人情報やクレジットカー番号などの機密情報が含まれていないかを検知する。


* Detective

複数のAWSサービスを横断して、セキュリティインシデントの発生元等を特定するためのGUIを提供する。


* NetworkFirewall

インターネットゲートウェイとvpcの境界に設置するファイアーウォールを実現するサービス。
